@startuml

class ConsoleHandler {
- console : ConsoleReader
-editor : ConsoleEditor

+ run () : void
- accept(command:Command):CommandResult
}

class Context {
- document : Document
- engine : Engine
-trace : Trace

+ getDocument () : Document
+ newDocument () : void
+ getQueryIterator () : iterator<Query>
+ getQueryNumber () : integer
+ dropQueries () : void
+ connectEngine () : void
+ getEngine () : Engine
+ disconnectEngine () : void
+ getTrace() : Trace
+loadDocument(filename:string):void
+loadQueries(filename:string):void
+loadTemplates(filename:string):void
}

class Command {
-code : CommandCode
- object : ObjectCode
- arguments : list<string>

+getCode(): CommandCode
+setCode (code:CommandCode):void
+getObject():ObjectCode
+setObject(object:ObjectCode):void
+getArgumentNumber():integer
+getArgument(idx:integer):string
+addArgument(arg:string):void
+clear():void
}

class CommandResult {
-command_code : CommandCode
-code : ReturnCode
- object : ObjectCode
- arguments : list<string>

+getCommandCode():CommandCode
+setCommandCode(code:CommandCode):void
+getCode(): ReturnCode
+setCode (code:ReturnCode):void
+getObject():ObjectCode
+setObject(object:ObjectCode):void
+getArgumentNumber():integer
+getArgument(idx:integer):string
+addArgument(arg:string):void
+clear():void
}

enum ReturnCode {
}

class CommandHandler {
- active_mode:HandlerCode
+ handle(command:Command): CommandResult
}

enum CommandCode {
}

enum ObjectCode {
}

enum HandlerCode {
}


ConsoleHandler -LEFT- Context
ConsoleHandler -RIGHT- CommandHandler

@enduml